<!DOCTYPE html>
<html lang="en">
<head>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<link rel="icon" href="https://149367032.v2.pressablecdn.com/wp-content/uploads/2018/09/cropped-Letronics_L_250x250-32x32.gif" sizes="32x32" />
<link rel="icon" href="https://149367032.v2.pressablecdn.com/wp-content/uploads/2018/09/cropped-Letronics_L_250x250-192x192.gif" sizes="192x192" />
<link rel="apple-touch-icon" href="https://149367032.v2.pressablecdn.com/wp-content/uploads/2018/09/cropped-Letronics_L_250x250-180x180.gif" />

<style type="text/css">
  html {
    overflow-x: hidden;
    overflow-y: auto;
  }
  .important { color: #336699; }
  table.ordersTable, table.adapterCamera {
      width: 100%;
  }
  table.ordersTable td {
      padding: 7px;
      border: 3px #fff solid;
  }
  table.adapterCamera td {
      border: 2px #000 solid;
  }
  table.ordersTable tr:nth-child(even) {background: #EFEFEF}
  table.ordersTable tr:nth-child(odd) {background: #FFF}
  table.adapterCamera tr:nth-child(even) {background: none}
  table.adapterCamera tr:nth-child(odd) {background: none}

  select {
      padding: 5px 0px;
      width: 100%;
  }
  input {
      padding: 4px;
      width: 100%;
  }
  input:invalid {
    border: 2px dashed red;
  }

  input:invalid:required {
    border: 2px dashed red;
  }

  input:valid {
    border: 2px solid black;
  }
</style>

{% block head %}
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <title>{% block title %}{% endblock %} - Order Fulfillment</title>
{% endblock %}
</head>
<body style="margin: 0px;min-height: 100vh;display: flex;flex-direction: column;">
    <header id="main-header" style="top: 0px;background-color: #e0e0e0; padding: 10px;">
        <table width="100%">
        <tr><td>
        <a href="#">
            <img src="https://149367032.v2.pressablecdn.com/wp-content/uploads/2019/03/LeTronics.png"
                        alt="Order Fulfillment" id="logo" style="width:100px">
        </a>
        {{ app_environment }}
        </td>
        <td width="100%" style="text-align:center; width: 100%" class='menu'>
            <a href="/{{ env_name }}/orders">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock" viewBox="0 0 16 16">
  <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
  <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>
</svg>
                Unshipped ({{ count_unshipped }})</a> &nbsp;&nbsp;&nbsp;
            <a href="/{{ env_name }}/shipped">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-send-check" viewBox="0 0 16 16">
  <path d="M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855a.75.75 0 0 0-.124 1.329l4.995 3.178 1.531 2.406a.5.5 0 0 0 .844-.536L6.637 10.07l7.494-7.494-1.895 4.738a.5.5 0 1 0 .928.372l2.8-7Zm-2.54 1.183L5.93 9.363 1.591 6.602l11.833-4.733Z"/>
  <path d="M16 12.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Zm-1.993-1.679a.5.5 0 0 0-.686.172l-1.17 1.95-.547-.547a.5.5 0 0 0-.708.708l.774.773a.75.75 0 0 0 1.174-.144l1.335-2.226a.5.5 0 0 0-.172-.686Z"/>
</svg>

                In transit ({{ count_shipped }})</a> &nbsp;&nbsp;&nbsp;
            <a href="/{{ env_name }}/delivered">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar2-check" viewBox="0 0 16 16">
  <path d="M10.854 8.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708 0z"/>
  <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM2 2a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H2z"/>
  <path d="M2.5 4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H3a.5.5 0 0 1-.5-.5V4z"/>
</svg>
                Delivered ({{ count_delivered }})</a> &nbsp;&nbsp;&nbsp;
               <a href="/{{ env_name }}/delayed">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hourglass-bottom" viewBox="0 0 16 16">
  <path d="M2 1.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-1v1a4.5 4.5 0 0 1-2.557 4.06c-.29.139-.443.377-.443.59v.7c0 .213.154.451.443.59A4.5 4.5 0 0 1 12.5 13v1h1a.5.5 0 0 1 0 1h-11a.5.5 0 1 1 0-1h1v-1a4.5 4.5 0 0 1 2.557-4.06c.29-.139.443-.377.443-.59v-.7c0-.213-.154-.451-.443-.59A4.5 4.5 0 0 1 3.5 3V2h-1a.5.5 0 0 1-.5-.5zm2.5.5v1a3.5 3.5 0 0 0 1.989 3.158c.533.256 1.011.791 1.011 1.491v.702s.18.149.5.149.5-.15.5-.15v-.7c0-.701.478-1.236 1.011-1.492A3.5 3.5 0 0 0 11.5 3V2h-7z"/>
</svg>
        Delayed ({{ count_delayed }})</a> &nbsp;&nbsp;&nbsp;
            <a href="/{{ env_name }}/returned">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-octagon" viewBox="0 0 16 16">
                <path d="M4.54.146A.5.5 0 0 1 4.893 0h6.214a.5.5 0 0 1 .353.146l4.394 4.394a.5.5 0 0 1 .146.353v6.214a.5.5 0 0 1-.146.353l-4.394 4.394a.5.5 0 0 1-.353.146H4.893a.5.5 0 0 1-.353-.146L.146 11.46A.5.5 0 0 1 0 11.107V4.893a.5.5 0 0 1 .146-.353zM5.1 1 1 5.1v5.8L5.1 15h5.8l4.1-4.1V5.1L10.9 1z"/>
                <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>
              </svg>
                Refused ({{ count_returned }})</a> &nbsp;&nbsp;&nbsp;
            <a href="/{{ env_name }}/failed">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar-x" viewBox="0 0 16 16">
  <path d="M6.146 7.146a.5.5 0 0 1 .708 0L8 8.293l1.146-1.147a.5.5 0 1 1 .708.708L8.707 9l1.147 1.146a.5.5 0 0 1-.708.708L8 9.707l-1.146 1.147a.5.5 0 0 1-.708-.708L7.293 9 6.146 7.854a.5.5 0 0 1 0-.708z"/>
  <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
</svg>
            Failed ({{ count_failed }})</a> &nbsp;&nbsp;&nbsp;

<a href="/{{ env_name }}/returns">
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-repeat" viewBox="0 0 16 16">
    <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"/>
    <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"/>
  </svg>
  Returns ({{ count_returns }})</a> &nbsp;&nbsp;&nbsp;

<a href="/{{ env_name }}/mapping">
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list-check" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3.854 2.146a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0l-.5-.5a.5.5 0 1 1 .708-.708L2 3.293l1.146-1.147a.5.5 0 0 1 .708 0zm0 4a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0l-.5-.5a.5.5 0 1 1 .708-.708L2 7.293l1.146-1.147a.5.5 0 0 1 .708 0zm0 4a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0l-.5-.5a.5.5 0 0 1 .708-.708l.146.147 1.146-1.147a.5.5 0 0 1 .708 0z"/>
  </svg>
                Mapping</a> &nbsp;&nbsp;&nbsp;
            <a href="/{{ env_name }}/command">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-code-square" viewBox="0 0 16 16">
  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
  <path d="M6.854 4.646a.5.5 0 0 1 0 .708L4.207 8l2.647 2.646a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 0 1 .708 0zm2.292 0a.5.5 0 0 0 0 .708L11.793 8l-2.647 2.646a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708 0z"/>
</svg>
            Command</a> &nbsp;&nbsp;&nbsp;
            <a href="{{ logout_url }}">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-right" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"/>
  <path fill-rule="evenodd" d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"/>
</svg>
            Logout ({{ username }})</a>
        </td>
        </tr>
        </table>
    </header>

<main>
    <div class="wrapper" style="width:95%; margin-left: auto; margin-right: auto">
        <div id="content">
        <table width="100%">
        <tr>
            <td width="15%" valign="top">
            <br><br>
            <a href="/{{ env_name }}/inventories" style="font-size: 18px">
            <svg version="1.1" height="28px" width="28px" style="margin-bottom: 5px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve">
                <g><g><g><path stroke-width="10" fill-opacity="0" stroke="#000000"  d="M128.3,4.5C117.7,10.2,11.6,69.7,10.9,70.4c-0.9,0.9-0.9,2.5-0.9,21c0,19.4,0.1,20.1,1,21.1c1.6,1.6,4,1.3,7.9-1l3.4-2l0.3,70.6c0.2,38.8,0.3,70.6,0.4,70.7c0.1,0.1,0.8,0.5,1.6,0.9c1.3,0.7,13,0.8,103.4,0.8c90.4,0,102.1-0.1,103.4-0.8c0.9-0.5,1.6-0.9,1.6-0.9c0.1-0.1,0.3-32.2,0.4-71.5l0.3-71.4l3.5,2.2c4,2.6,5.8,2.8,7.5,1l1.3-1.2V90.1V70.3l-1.1-1.2c-0.7-0.7-6-4.3-11.9-8c-5.9-3.7-28.1-17.7-49.2-31c-21.1-13.4-39.3-24.8-40.4-25.5c-1.8-1-2.7-1.2-7.5-1.2C131.1,3.5,130,3.6,128.3,4.5z M189,42.7L238.5,74v13.4c0,7.4-0.2,13.6-0.4,13.7c-0.3,0.1-22-13.2-48.4-29.6l-48-29.8h-6c-5.9,0-6,0.1-9,1.7c-15.9,8.8-107.9,59.1-108.5,59.4c-0.7,0.3-0.8-1.2-0.7-13.6l0.1-14l57-31.8l57-31.8h3.9h3.9L189,42.7z M182.5,76.2l42.7,26.5l0.1,70.9l0.1,70.9H128H30.6v-69.7v-69.7l50.4-27.7l50.3-27.7h4.3l4.3-0.1L182.5,76.2z"/><path stroke-width="10" fill-opacity="0" stroke="#000000"  d="M87.8,93c-1.9,1.5-2,2-2,32.7v29.9L68,155.7c-16.7,0.2-17.8,0.2-18.8,1.1c-1.1,1-1.1,1.1-1.1,34.5c0,32.9,0,33.5,1,34.5c1,1,1.7,1,78.8,1c77.2,0,77.8,0,78.8-1s1-1.7,1-34.3c0-32.1-0.1-33.4-1-34.5l-1-1.2l-17.9-0.2l-17.9-0.1V126c0-19.3-0.2-30-0.5-31c-0.3-0.9-1.1-1.8-1.8-2.1C166,92,88.9,92.1,87.8,93z M124,114.4c0,9.3,0.2,14.4,0.6,15.3c1.3,2.8,5.6,2.8,6.9,0c0.4-0.9,0.6-5.9,0.6-15.3v-14.1h15.1h15.1V128v27.6H128H93.9V128v-27.6h15.1H124V114.4L124,114.4z M85.8,177.7c0,11.4,0.2,14.4,0.8,15.5c1.2,2.4,4.1,2.8,6,0.8l1.3-1.2v-14.6v-14.6h15.1H124v27.9v27.9l-34-0.1l-34-0.1l-0.2-27.8l-0.1-27.7h15.1h15.1L85.8,177.7L85.8,177.7z M162.1,178.2v14.6l1.3,1.2c2,2,4.8,1.6,6-0.8c0.6-1.2,0.8-4.1,0.8-15.5v-14.1h15.1h15.1l-0.1,27.7l-0.2,27.8l-34,0.2l-34,0.1v-27.9v-27.9h15.1h15.1L162.1,178.2L162.1,178.2z"/></g></g></g>
            </svg>
                Inventory</a>
                <hr>
                <div><span style="padding-left:20px;font-weight: bold">SKU</span> <span style="padding-left:40px;font-weight:bold">A Stock</span></div>
                {% for inventory in inventories -%}
                    {% set name = inventory.SKU %}
                    <div class='inventory'>
                        {% if inventory.type == 'Cable' %}
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-thunderbolt" viewBox="0 0 16 16">
                              <path d="M3.5 7a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-9Z"/>
                              <path d="M1 3a1 1 0 0 0-1 1v7.293A1 1 0 0 0 .293 12L2 13.707a1 1 0 0 0 .707.293h10.586a1 1 0 0 0 .707-.293L15.707 12a1 1 0 0 0 .293-.707V4a1 1 0 0 0-1-1H1Zm0 1h14v7.293L13.293 13H2.707L1 11.293V4Z"/>
                            </svg>
                        {% endif %}
                        {% if inventory.type == 'Camera' %}
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-camera" viewBox="0 0 16 16">
                              <path d="M15 12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h1.172a3 3 0 0 0 2.12-.879l.83-.828A1 1 0 0 1 6.827 3h2.344a1 1 0 0 1 .707.293l.828.828A3 3 0 0 0 12.828 5H14a1 1 0 0 1 1 1v6zM2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2z"/>
                              <path d="M8 11a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5zm0 1a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7zM3 6.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/>
                            </svg>
                        {% endif %}
                        {% if inventory.type == 'Accessory' %}
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear-wide-connected" viewBox="0 0 16 16">
                                  <path d="M7.068.727c.243-.97 1.62-.97 1.864 0l.071.286a.96.96 0 0 0 1.622.434l.205-.211c.695-.719 1.888-.03 1.613.931l-.08.284a.96.96 0 0 0 1.187 1.187l.283-.081c.96-.275 1.65.918.931 1.613l-.211.205a.96.96 0 0 0 .434 1.622l.286.071c.97.243.97 1.62 0 1.864l-.286.071a.96.96 0 0 0-.434 1.622l.211.205c.719.695.03 1.888-.931 1.613l-.284-.08a.96.96 0 0 0-1.187 1.187l.081.283c.275.96-.918 1.65-1.613.931l-.205-.211a.96.96 0 0 0-1.622.434l-.071.286c-.243.97-1.62.97-1.864 0l-.071-.286a.96.96 0 0 0-1.622-.434l-.205.211c-.695.719-1.888.03-1.613-.931l.08-.284a.96.96 0 0 0-1.186-1.187l-.284.081c-.96.275-1.65-.918-.931-1.613l.211-.205a.96.96 0 0 0-.434-1.622l-.286-.071c-.97-.243-.97-1.62 0-1.864l.286-.071a.96.96 0 0 0 .434-1.622l-.211-.205c-.719-.695-.03-1.888.931-1.613l.284.08a.96.96 0 0 0 1.187-1.186l-.081-.284c-.275-.96.918-1.65 1.613-.931l.205.211a.96.96 0 0 0 1.622-.434l.071-.286zM12.973 8.5H8.25l-2.834 3.779A4.998 4.998 0 0 0 12.973 8.5m0-1a4.998 4.998 0 0 0-7.557-3.779l2.834 3.78h4.723zM5.048 3.967c-.03.021-.058.043-.087.065zm-.431.355A4.984 4.984 0 0 0 3.002 8c0 1.455.622 2.765 1.615 3.678L7.375 8zm.344 7.646.087.065z"/>
                            </svg>
                            {#
                            {% set part_main = name.split(' - ') %}
                            {% set name = part_main[0] %}
                            #}
                        {% endif %}

                        {{ name }} &nbsp;&nbsp; <strong>{{ inventory.quantity }}</strong></div>
                {% endfor %}
            </td>
            <td width="75%" valign="top" style="padding-left:10px">
                {% block content %}{% endblock %}
            </td>
        </tr>
       </table>
        </div>
    </div>
</main>

<!-- Modal -->
<div class="modal fade" id="orderCommentsModal" tabindex="-1" aria-labelledby="orderCommentsModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="orderCommentsModalLabel">Order Comments</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form>
            <input type="hidden" id="orderId" name="orderId">
            <input type="hidden" id="order_num" name="order_num">
            <div class="form-group">
              <label for="message-text" class="col-form-label">Comments</label>
              <textarea class="form-control" id="orderComments" style="height:200px"></textarea>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary save">Save</button>
        </div>
      </div>
    </div>
  </div>
<script>
jQuery('.modal-footer .save').on('click', function() {
    var orderId = jQuery('#orderId').val()
    var order_num = jQuery('#order_num').val()
    var comments = jQuery('#orderComments').val()
    var order_class = '.order_comments_' + order_num
    jQuery.ajax({
        url: '/{{ env_name }}/comments',
        method: 'POST',
        data: { order_id: orderId, comments: comments },
        success: function(response) {
            if (response.success) {
                jQuery(order_class).html(comments)
            }
            jQuery('#orderCommentsModal').modal('hide')
        },
        error: function(error) {
            console.log('Error:', error);
        }
    });
})
jQuery('#orderCommentsModal').on('show.bs.modal', function (event) {
    var button = jQuery(event.relatedTarget) // Button that triggered the modal
    var order_num = button.data('order_num')
    var orderId = button.data('orderid')
    var comments = getOrderComments(orderId)

    // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
    // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
    var modal = jQuery(this)
    modal.find('.modal-body textarea').val('loading...');
    modal.find('.modal-footer .save').disabled = true
    modal.find('.modal-title').text('Order #' + order_num + ' Comments')
    modal.find('.modal-body #orderId').val(orderId)
    modal.find('.modal-body #order_num').val(order_num)
})

function getOrderComments(orderId) {
    // AJAX request to get order comments
    jQuery.ajax({
        url: '/{{ env_name }}/comments',
        method: 'GET',
        data: { order_id: orderId },
        success: function(response) {
            jQuery('#orderComments').val(response.comments)
            jQuery('.modal-footer .save').disabled = false
        },
        error: function(error) {
            console.log('Error:', error);
        }
    });
}
</script>
</body>
</html>